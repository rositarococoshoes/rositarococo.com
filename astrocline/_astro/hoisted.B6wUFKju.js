import"./hoisted.B2uaoqCp.js";import"https://sdk.mercadopago.com/js/v2";const o=new MercadoPago("APP_USR-3dec33cf-193c-4dcc-a85c-d850bf083a09"),u=o.fields.create("cardNumber",{placeholder:"Número del tarjeta"}).mount("cardNumber");o.fields.create("expirationDate",{placeholder:"MM/YY"}).mount("cardExpirationDate");o.fields.create("securityCode",{placeholder:"Código de seguridad"}).mount("securityCode");(async function(){try{const e=await o.getIdentificationTypes(),n=document.getElementById("docType");p(n,e)}catch(e){console.error("Error getting identificationTypes: ",e)}})();function p(t,e,n={label:"name",value:"id"}){const{label:a,value:c}=n;t.options.length=0;const i=document.createDocumentFragment();e.forEach(d=>{const l=d[c],m=d[a],r=document.createElement("option");r.value=l,r.textContent=m,i.appendChild(r)}),t.appendChild(i)}u.on("binChange",y);async function y(t){const{bin:e}=t,{results:n}=await o.getPaymentMethods({bin:e});await g(n[0].id,e)}async function g(t,e){document.getElementById("paymentMethodId").value=t,await f(t,e)}async function f(t,e){try{const n=await o.getIssuers({paymentMethodId:t,bin:e});E(n,e)}catch(n){console.error("Error getting issuers: ",n)}}function E(t,e){let n=document.getElementById("issuer");n.innerHTML="",t.forEach(a=>{let c=document.createElement("option");c.text=a.name,c.value=a.id,n.appendChild(c)}),h(e)}async function h(t){try{const e=await o.getInstallments({amount:document.getElementById("transactionAmount").value,bin:t,paymentTypeId:"credit_card"});I(e)}catch(e){console.error("Error getting installments: ",e)}}function I(t){const e=document.getElementById("installments");e.innerHTML="",t.length>0&&t[0].payer_costs&&t[0].payer_costs.forEach(n=>{let a=document.createElement("option");a.text=n.recommended_message,a.value=n.installments,e.appendChild(a)})}let s=!1;document.getElementById("paymentForm").addEventListener("submit",b);async function b(t){if(t.preventDefault(),!s)try{const e=await o.fields.createCardToken({cardholderName:document.getElementById("cardholderName").value,identificationType:document.getElementById("docType").value,identificationNumber:document.getElementById("docNumber").value});v(e.id)}catch(e){console.error("Error creating card token: ",e),alert("Error al procesar el pago. Por favor, verifica los datos de tu tarjeta.")}}function v(t){let e=document.getElementById("paymentForm"),n=document.createElement("input");n.setAttribute("name","token"),n.setAttribute("type","hidden"),n.setAttribute("value",t),e.appendChild(n),s=!0,e.submit()}

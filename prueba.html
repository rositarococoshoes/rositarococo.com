<!DOCTYPE html>
<html lang="es">
<head>
    <!-- Google Tag Manager -->
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
    j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
    'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-W2CVWDJ');</script>
    <!-- End Google Tag Manager -->

    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <title>Rosita Rococó - Colección Otoño-Invierno</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap" rel="stylesheet">
    <link href="//cdn.jsdelivr.net/npm/slick-carousel@1.8.1/slick/slick.css" rel="stylesheet" type="text/css" />
    <link href="//cdn.jsdelivr.net/npm/slick-carousel@1.8.1/slick/slick-theme.css" rel="stylesheet" type="text/css" />
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">

    <style type="text/css">
      /* --- Reset & Base Styles --- */
      *, *::before, *::after {
        box-sizing: border-box;
        margin: 0;
        padding: 0;
      }
      html {
        scroll-behavior: smooth;
      }
      body {
        font-family: 'Lato', sans-serif;
        line-height: 1.6;
        color: #4a4a4a; /* Slightly warmer dark grey */
        background-color: #fdfbf7; /* Warm off-white background */
        font-size: 16px;
        -webkit-font-smoothing: antialiased;
        -moz-osx-font-smoothing: grayscale;
      }
      img {
        max-width: 100%;
        height: auto;
        display: block;
        border-radius: 8px; /* Soften image corners slightly */
      }
      a {
        color: #c06a49; /* Terracotta accent */
        text-decoration: none;
        transition: color 0.3s ease;
      }
      a:hover {
        color: #a55537; /* Darker terracotta on hover */
        text-decoration: none; /* Keep links clean on hover */
      }
      h1, h2, h3, h4, h5, h6 {
        margin-bottom: 0.8em;
        line-height: 1.3;
        font-weight: 700;
        color: #3d3d3d; /* Darker heading color */
      }
      p {
        margin-bottom: 1em;
      }
      fieldset {
        border: none;
        padding: 0;
        margin-bottom: 25px;
      }
      legend {
        font-weight: 700;
        margin-bottom: 10px;
        font-size: 1.1em;
        padding: 0;
        display: block;
        width: 100%;
        color: #3d3d3d;
      }
      button, input[type=submit] {
        cursor: pointer;
        transition: background-color 0.3s ease, border-color 0.3s ease, transform 0.1s ease;
      }
       button:active, input[type=submit]:active {
         transform: scale(0.98); /* Subtle press effect */
       }

      /* --- Layout --- */
      .container {
        max-width: 960px;
        margin: 0 auto;
        padding: 0 15px;
      }
      .main-header {
        text-align: center;
        padding: 30px 0; /* More vertical space */
        margin-bottom: 30px;
      }
      .main-header img {
        max-width: 230px; /* Slightly smaller logo */
        margin: 0 auto 20px;
        border-radius: 0; /* Logo might not need rounding */
      }
      .main-header h1 {
         font-size: 1.9em; /* Slightly larger */
         color: #3d3d3d;
         font-weight: 300; /* Lighter weight for elegance */
         margin-bottom: 8px;
      }
      .main-header .subtitle {
         font-size: 1.1em;
         color: #777;
         font-weight: 300;
      }

      /* --- Info Section --- */
      .info-section {
        background-color: #f8f4ef; /* Lighter beige for contrast */
        padding: 30px;
        border-radius: 12px; /* Softer radius */
        margin-bottom: 40px;
        text-align: center;
        border: 1px solid #e8e0d8; /* Subtle border */
      }
      .info-section h2 {
          font-size: 1.6em;
          margin-bottom: 20px;
          font-weight: 400;
          color: #c06a49; /* Terracotta title */
      }
      .info-section .price-highlight {
          font-size: 1.2em;
          font-weight: 700;
          margin: 12px 0;
          display: block;
          line-height: 1.5;
          color: #4a4a4a;
      }
      .info-section .price-highlight .price {
          color: #c06a49; /* Terracotta accent for price */
          font-weight: 700;
      }
       .info-section .price-highlight span {
          font-size: 0.85em;
          font-weight: 400;
          color: #777;
      }
      .info-section .details {
          list-style: none;
          padding: 0;
          margin-top: 20px;
          color: #555;
          font-size: 0.95em;
          line-height: 1.8;
      }
       .info-section .details li {
          margin-bottom: 8px; /* Slightly more space */
       }
      .info-section .details strong {
          color: #3d3d3d;
      }
       .info-section .discount-info {
          margin-top: 20px;
          font-weight: 700;
          color: #218838; /* Slightly darker green */
          font-size: 1em;
          text-transform: uppercase;
          letter-spacing: 0.5px;
       }

       /* --- How to Buy Section --- */
       .how-to-buy {
         margin-bottom: 45px;
         padding: 25px;
         background-color: #fff; /* White contrast */
         border-radius: 12px;
         border: 1px solid #eee;
       }
       .how-to-buy h3 {
         text-align: center;
         margin-bottom: 20px;
         font-size: 1.4em;
         font-weight: 400;
         color: #5d4037; /* Deep brown */
       }
       .how-to-buy ol {
         list-style: none; /* Remove default numbers */
         padding-left: 0;
         counter-reset: step-counter;
         max-width: 450px;
         margin: 0 auto; /* Center list */
       }
       .how-to-buy li {
         counter-increment: step-counter;
         margin-bottom: 15px;
         font-size: 1em;
         color: #555;
         position: relative;
         padding-left: 45px; /* Space for number */
         text-align: left;
       }
       .how-to-buy li::before {
            content: counter(step-counter);
            position: absolute;
            left: 0;
            top: -2px;
            background-color: #c06a49; /* Terracotta */
            color: white;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 0.9em;
       }
       .how-to-buy strong {
         color: #3d3d3d;
         font-weight: 700;
       }

      /* --- Product Grid & Items --- */
      .product-grid {
        margin-bottom: 40px;
      }
      .product-item {
        margin-bottom: 50px;
        padding: 25px;
        border: 1px solid #eee;
        border-radius: 12px;
        background-color: #fff;
        text-align: center;
        overflow: hidden;
      }
      .product-item h2 {
        font-size: 1.5em;
        margin-bottom: 20px;
        font-weight: 400;
        color: #5d4037; /* Deep brown */
      }

      /* --- Carousel Styles --- */
      .model-carousel, .testimonials-carousel {
        width: 100%;
        max-width: 500px;
        margin: 0 auto 25px auto; /* Center carousel, more space below */
        overflow: hidden;
      }
      .model-carousel .slick-slide {
        display: flex !important;
        justify-content: center;
        align-items: center;
        padding: 0 5px;
      }
      .model-carousel .slick-slide img {
        width: 100%;
        height: auto;
        object-fit: contain;
        border-radius: 8px; /* Consistent rounded corners */
        max-height: 70vh; /* Limit height */
        margin: 0 auto;
        border: 1px solid #f0f0f0; /* Very subtle border */
      }
      .testimonials-carousel .slick-slide img {
          width: 100%;
          height: auto;
          object-fit: contain;
          border: 1px solid #eee;
          border-radius: 12px; /* Softer corners */
          margin: 0 auto;
          max-height: 60vh;
      }

      /* Carousel Navigation (Arrows & Dots) */
      .slick-prev, .slick-next {
        width: 35px;
        height: 35px;
        z-index: 10;
        background-color: rgba(255, 255, 255, 0.85);
        border-radius: 50%;
        box-shadow: 0 2px 6px rgba(0,0,0,0.1);
        transition: background-color 0.3s ease, transform 0.2s ease;
      }
       .slick-prev:hover, .slick-next:hover {
        background-color: rgba(255, 255, 255, 1);
        transform: scale(1.1);
      }
      .slick-prev { left: 12px; }
      .slick-next { right: 12px; }

      .slick-prev:before, .slick-next:before {
        color: #c06a49; /* Terracotta arrows */
        font-size: 20px;
        opacity: 1;
        line-height: 1;
      }

      .slick-dots {
        bottom: -10px; /* Position dots below carousel */
      }
      .slick-dots li button:before {
        font-size: 10px;
        color: #ccc;
        opacity: 0.8;
      }
      .slick-dots li.slick-active button:before {
        color: #c06a49; /* Terracotta active dot */
        opacity: 1;
      }

      /* --- Product Selection Area --- */
      .product-selection {
        margin-top: 25px;
        padding-top: 25px;
        border-top: 1px solid #eee;
      }
      .product-info-details {
        font-size: 0.9em;
        color: #666;
        margin-bottom: 20px;
      }
      .product-info-details strong { color: #4a4a4a; }

      .quantity-selector label {
        margin: 0 12px;
        font-size: 0.95em;
        cursor: pointer;
        display: inline-flex;
        align-items: center;
        color: #555;
      }
      .quantity-selector input[type="radio"] {
        margin-left: 6px;
        width: 18px;
        height: 18px;
        accent-color: #c06a49; /* Terracotta radio */
      }
      .quantity-selector span {
          font-weight: 700;
          color: #5d4037; /* Deep brown label */
          margin-right: 10px;
          font-size: 0.95em;
      }

      .size-selector {
        margin-top: 20px;
      }
      .size-selector .form-group {
        margin-bottom: 10px;
      }
      .size-selector select.form-control {
        max-width: 300px;
        margin: 8px auto; /* Center select dropdown */
      }
      .fieldsetstalles { display: none; }

      .avisoagregado {
        color: #218838;
        font-weight: bold;
        font-size: 0.9em;
        margin-top: 15px;
        padding: 5px;
        display: inline-block;
        animation: fadeOut 5s forwards;
      }
      @keyframes fadeOut {
          0% { opacity: 1; }
          90% { opacity: 1; }
          100% { opacity: 0; }
      }


      /* --- Form Styles --- */
      #restodelform {
        padding: 35px 25px;
        background-color: #fff; /* White background for form clarity */
        border: 1px solid #eee;
        border-radius: 12px;
        margin-top: 40px;
      }
      #restodelform legend {
          font-size: 1.25em;
          color: #3d3d3d;
          border-bottom: 1px solid #eee;
          padding-bottom: 12px;
          margin-bottom: 25px;
          font-weight: 400;
      }
       #restodelform h2 { /* Specific title for form section */
          text-align: center;
          font-size: 1.7em;
          margin-bottom: 35px;
          font-weight: 300;
          color: #5d4037;
       }
      .form-group {
        margin-bottom: 20px;
      }
       .form-group label {
         display: block;
         margin-bottom: 6px;
         font-size: 0.95em;
         color: #555;
         font-weight: 700;
       }
      .form-control {
        width: 100%;
        padding: 12px 15px;
        border: 1px solid #ccc;
        border-radius: 8px; /* Softer corners */
        font-size: 1em;
        line-height: 1.5;
        transition: border-color 0.3s ease, box-shadow 0.3s ease;
        background-color: #fdfdfd; /* Very light grey inside */
      }
      .form-control:focus {
        border-color: #c06a49; /* Terracotta focus */
        outline: none;
        box-shadow: 0 0 0 3px rgba(192, 106, 73, 0.15);
      }
      .form-control[readonly] {
        background-color: #f0f0f0;
        cursor: not-allowed;
        opacity: 0.7;
      }
      select.form-control {
          appearance: none; /* Custom arrow */
          background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' fill='%23888' viewBox='0 0 16 16'%3E%3Cpath fill-rule='evenodd' d='M1.646 4.646a.5.5 0 0 1 .708 0L8 10.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708z'/%3E%3C/svg%3E");
          background-repeat: no-repeat;
          background-position: right 15px center;
          background-size: 16px 12px;
          padding-right: 40px; /* Space for arrow */
      }
      .help-block {
        font-size: 0.85em; /* Smaller help text */
        color: #888;
        margin-top: 6px;
        margin-bottom: 10px;
        line-height: 1.5;
      }

      /* Form Summary Section */
      #confirma-pedido {
        background-color: #f8f4ef; /* Light beige */
        padding: 20px;
        border-radius: 8px;
        border: 1px solid #e8e0d8;
        margin-top: 20px;
      }
       #confirma-pedido h3 {
         font-size: 1.15em;
         margin-bottom: 15px;
         font-weight: 700;
         color: #5d4037;
       }
       #confirma-pedido p { margin-bottom: 10px; line-height: 1.6; font-size: 0.95em; color: #555;}
       #confirma-pedido strong { color: #3d3d3d; font-weight: 700; min-width: 100px; display: inline-block;} /* Align labels */
       #confirma-pedido span[id^="help-"] { font-weight: normal; color: #666; }
       #preciototal {
         font-weight: bold;
         font-size: 1.15em;
         margin-top: 20px;
         margin-bottom: 10px;
         display: block;
         color: #4a4a4a;
         border-top: 1px dashed #ddd; /* Dashed separator */
         padding-top: 20px;
       }
       #preciototal .price { color: #c06a49; } /* Terracotta */
       #preciototal .shipping { color: #218838; } /* Darker green */
       #preciototal small { display: block; font-weight: normal; font-size: 0.8em; margin-top: 5px;}

      .btn-primary {
        background-color: #c06a49; /* Terracotta */
        color: white;
        border: none;
        padding: 15px 25px;
        font-size: 1.2em;
        font-weight: 700;
        border-radius: 8px;
        width: 100%;
        text-transform: uppercase;
        letter-spacing: 1px;
        margin-top: 25px;
      }
      .btn-primary:hover, .btn-primary:focus {
        background-color: #a55537; /* Darker terracotta */
        outline: none;
      }
      .btn-primary:disabled {
         background-color: #b0a79e; /* Muted greyish brown */
         cursor: wait;
      }

      /* --- Floating Elements & Notifications --- */
      #floating-cart-summary {
        position: fixed;
        bottom: 0;
        left: 0;
        width: 100%;
        background-color: rgba(253, 251, 247, 0.95); /* Matches body bg with transparency */
        backdrop-filter: blur(5px);
        padding: 12px 15px;
        box-shadow: 0 -2px 12px rgba(0, 0, 0, 0.08);
        z-index: 999;
        font-size: 0.9em;
        display: none; /* Initially hidden */
        border-top: 1px solid #eee;
        text-align: center;
      }
       #floating-cart-summary p {
         margin-bottom: 5px;
         color: #555;
       }
       #floating-cart-summary b {
         color: #3d3d3d;
         font-weight: 700;
       }
       #floating-cart-summary span {
         color: #666;
         display: block;
         margin-top: 5px;
         font-size: 0.95em;
       }
       #floating-cart-summary .price { color: #c06a49; } /* Terracotta */
       #floating-cart-summary .shipping { color: #218838; } /* Darker green */
       #finalizarpedido {
         display: inline-block; /* Make it behave like a button */
         background-color: #218838; /* Green CTA */
         color: white;
         padding: 9px 18px;
         border-radius: 6px;
         margin-top: 8px;
         font-size: 0.95em;
         font-weight: bold;
         text-align: center;
         /* max-width: 250px; */
         /* margin-left: auto; */
         /* margin-right: auto; */
         text-decoration: none;
         transition: background-color 0.3s ease;
       }
       #finalizarpedido:hover {
         background-color: #1a6a28; /* Darker green */
       }

      #whatsapp {
        position: fixed;
        width: 50px;
        height: 50px;
        bottom: 20px;
        right: 20px;
        z-index: 1000;
      }
      #whatsapp img {
        width: 100%;
        height: 100%;
        border-radius: 50%;
        box-shadow: 0 4px 10px rgba(0,0,0,0.15);
        transition: transform 0.3s ease;
      }
       #whatsapp img:hover {
         transform: scale(1.1);
       }

      /* Loading Overlay */
      .loading-overlay {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(253, 251, 247, 0.9); /* Match body bg */
        backdrop-filter: blur(4px);
        z-index: 9999;
        align-items: center;
        justify-content: center;
        text-align: center;
        flex-direction: column;
        opacity: 0;
        transition: opacity 0.4s ease; /* Smoother fade */
        pointer-events: none;
      }
      .loading-overlay.visible {
          display: flex;
          opacity: 1;
          pointer-events: auto;
      }
      .loading-spinner {
        width: 45px;
        height: 45px;
        border: 4px solid #e8e0d8; /* Lighter border */
        border-top: 4px solid #c06a49; /* Terracotta spinner */
        border-radius: 50%;
        margin-bottom: 20px;
        animation: spin 1s linear infinite;
      }
      @keyframes spin {
        0% { transform: rotate(0deg); }
        100% { transform: rotate(360deg); }
      }
      .loading-message {
        color: #5d4037; /* Deep brown text */
        font-size: 1em;
        max-width: 85%;
        line-height: 1.5;
      }

      /* Sales Notifications */
      #notification-container {
          position: fixed;
          bottom: 85px; /* Above WhatsApp */
          left: 15px;
          z-index: 995;
          width: auto;
          max-width: 300px;
      }
      .notification {
        display: flex;
        align-items: center;
        padding: 12px; /* More padding */
        background-color: rgba(255, 255, 255, 0.97); /* White background for pop */
        backdrop-filter: blur(5px);
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1); /* Softer shadow */
        border-radius: 10px;
        margin-top: 10px;
        animation: slideInUp 0.5s ease forwards, fadeOutNotification 0.5s ease 4.5s forwards;
        position: relative;
        border: 1px solid #eee;
      }
      @keyframes slideInUp { from { transform: translateY(20px); opacity: 0; } to { transform: translateY(0); opacity: 1; } }
      @keyframes fadeOutNotification { from { opacity: 1; } to { opacity: 0; } }

      .notification img {
        height: 55px;
        width: 55px;
        border-radius: 6px;
        object-fit: cover;
        margin-right: 12px;
        flex-shrink: 0;
      }
      .notification .order-info { flex-grow: 1; }
      .notification .order-info h3 { font-size: 0.9em; margin-bottom: 3px; color: #3d3d3d; }
      .notification .order-info p { font-size: 0.8em; color: #666; margin-bottom: 3px; line-height: 1.4; }
      .notification .order-info .customer-info { display: flex; justify-content: space-between; align-items: center; }
      .notification .order-info .city { color: #888; font-size: 0.75em; }
      .notification .close {
        position: absolute;
        top: 8px;
        right: 10px;
        font-size: 1.3em;
        color: #aaa;
        cursor: pointer;
        line-height: 1;
        padding: 2px;
      }
      .notification .close:hover { color: #777; }

      /* WhatsApp Validation Message */
      .error-message {
          font-size: 0.85em;
          margin-top: 8px; /* More space */
          padding: 9px 12px;
          border-radius: 6px;
          text-align: left;
          font-weight: normal;
          display: none;
          border: 1px solid transparent;
          line-height: 1.4;
      }
      .error-message.verifying {
          display: block;
          background-color: #e6f3ff; /* Lighter blue */
          color: #004085;
          border-color: #b8daff;
          animation: pulse 1.5s infinite ease-in-out;
      }
      .error-message.valid {
          display: block;
          background-color: #d4edda;
          color: #155724;
          border-color: #c3e6cb;
      }
      .error-message.invalid {
          display: block;
          background-color: #f8d7da;
          color: #721c24;
          border-color: #f5c6cb;
      }
      .error-message.error-connection {
          display: block;
          background-color: #fff3cd;
          color: #856404;
          border-color: #ffeeba;
      }
       @keyframes pulse {
        0%, 100% { opacity: 0.8; }
        50% { opacity: 1; }
      }

      /* Utilities */
      .text-center { text-align: center; }
      .hidden { display: none; }
      .sr-only { /* Screen Reader only */
          position: absolute; width: 1px; height: 1px; padding: 0; margin: -1px;
          overflow: hidden; clip: rect(0, 0, 0, 0); white-space: nowrap; border-width: 0;
       }

      /* Responsive Adjustments */
      @media (max-width: 768px) {
        body { font-size: 15px; }
        .container { padding: 0 10px; }
        .main-header h1 { font-size: 1.7em; }
        .main-header .subtitle { font-size: 1em; }
        .info-section { padding: 20px; }
        .product-item { padding: 20px; }
         .product-item h2 { font-size: 1.3em; }
        .slick-prev, .slick-next { width: 32px; height: 32px; }
        .slick-prev { left: 8px; }
        .slick-next { right: 8px; }
        .slick-prev:before, .slick-next:before { font-size: 18px; }
        #restodelform { padding: 25px 15px; }
        #restodelform h2 { font-size: 1.5em; margin-bottom: 25px;}
        .btn-primary { font-size: 1.1em; padding: 14px 15px; }
        #whatsapp { width: 45px; height: 45px; bottom: 15px; right: 15px; }
        #notification-container { bottom: 70px; left: 10px; max-width: calc(100% - 20px); }
         .how-to-buy li { padding-left: 40px; }
         .how-to-buy li::before { width: 28px; height: 28px; font-size: 0.8em; }
         #confirma-pedido strong { min-width: 80px; } /* Adjust label width on mobile */
      }

    </style>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.form/4.3.0/jquery.form.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>
</head>
<body>
    <!-- Google Tag Manager (noscript) -->
    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-W2CVWDJ"
    height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <!-- End Google Tag Manager (noscript) -->

    <!-- Anti-bot Honeypot Field -->
     <input type="text" name="website" id="website" class="sr-only" tabindex="-1" autocomplete="off">

    <!-- Floating Cart Summary/CTA -->
    <div id="floating-cart-summary">
      <p>TU SELECCIÓN: <b>...</b></p>
      <span id="floating-price-summary">Elige tus modelos y tallas arriba</span>
      <a id="finalizarpedido" href="#datos-envio" class="hidden">Completar Datos de Envío ↓</a>
    </div>

    <!-- WhatsApp Button -->
    <div id="whatsapp" style="display:none;">
        <a href="https://api.whatsapp.com/send?phone=5491127595502&text=Quiero%20consultar%20por%20el%20calzado" id="linktowhatsapp" target="_blank" rel="noopener noreferrer">
            <img alt="whatsapp" src="/whatsapp.png" /> <!-- Asegúrate que esta imagen exista -->
        </a>
    </div>

    <div class="container">

        <header class="main-header">
            <img alt="Rosita Rococó Logo" src="rosita-form.webp" /> <!-- Asegúrate que esta imagen exista -->
            <h1>🍂 Colección Otoño-Invierno 🍂</h1>
            <p class="subtitle">Diseños exclusivos que abrazan tus pasos.</p>
        </header>

        <section class="info-section">
            <h2>¡Prepárate para la Temporada!</h2>
            <span class="price-highlight">
                <span class="price">1 par: 🔥 $70.000</span>
            </span>
            <span class="price-highlight">
                <span class="price">2 pares: 🔥 $110.000</span> <span>($55.000 c/u - ¡Tu mejor opción!)</span>
            </span>
            <p style="font-size: 0.9em; color: #666; margin-top: 10px;"><em>Combina modelos y talles como más te guste (máx. 2 pares).</em></p>
            <p class="discount-info">💰 ¡Aprovecha 10% OFF extra pagando por Transferencia! 💰</p>

            <ul class="details">
                <li>🚚 <strong>ENVÍO GRATIS</strong> a todo el país. ¡Recíbelos en tu puerta!</li>
                <li>💳 <strong>PAGO SEGURO:</strong> 3 Cuotas sin interés con Tarjeta, MercadoPago o Transferencia (con dto.).</li>
                <li>⌛ <strong>PRODUCCIÓN A PEDIDO:</strong> Despachamos en 15 días aprox. ¡Hechos especialmente para ti!</li>
                <li>📏 <strong>TALLES:</strong> Del 35 al 40. Revisa los cm de plantilla en cada modelo.</li>
                <li>✅ <strong>STOCK ASEGURADO:</strong> Todos los modelos publicados están disponibles.</li>
            </ul>
        </section>

         <section class="how-to-buy">
            <h3>¿Cómo Comprar? En 3 Simples Pasos:</h3>
            <ol>
                <li><strong>Explora y Elige:</strong> Selecciona tu(s) modelo(s) favorito(s) y el talle perfecto.</li>
                <li><strong>Completa tus Datos:</strong> Ve al final de la página e ingresa tu información de envío y contacto.</li>
                <li><strong>Confirma y Paga:</strong> Elige tu forma de pago preferida y finaliza la compra. ¡Listo!</li>
            </ol>
        </section>

        <!-- Form Start -->
        <form action="https://docs.google.com/forms/d/e/1FAIpQLSd_KUORaRPQHoCM6B0GGp_fqI5eiAH0KM2Iwj1mXTgGEjawnQ/formResponse" id="bootstrapForm" method="POST" target="_self" novalidate="">

            <!-- Hidden Fields for Google Forms -->
             <textarea id="1209868979" name="entry.1209868979" class="hidden"></textarea>
             <input name="fvv" type="hidden" value="1" />
             <input name="fbzx" type="hidden" value="5661184097173102736" />
             <input type="hidden" name="entry.978809450" id="link-mercadopago">
             <input name="pageHistory" type="hidden" value="0" />

            <fieldset id="todoslosmodelos">
                <legend class="sr-only">Selección de Modelos</legend>
                <h2 class="text-center" style="font-weight: 300; font-size: 1.8em; margin-bottom: 40px; color: #5d4037;">Elige tus Esenciales de Temporada</h2>
                <div class="product-grid">

                    <!-- PRODUCTO 1: Roma Negras -->
                    <div class="product-item" id="modeload-roma-negras">
                        <h2>Mocasín Roma Negras</h2>
                        <div class="model-carousel">
                            <div><label for="talle-select-roma-negras-1"><img alt="Roma Negras Vista 1" src="roma-negras-1.jpg"></label></div>
                            <div><label for="talle-select-roma-negras-1"><img alt="Roma Negras Vista 2" data-lazy="roma-negras-1a.jpg"></label></div>
                            <div><label for="talle-select-roma-negras-1"><img alt="Roma Negras Vista 3" data-lazy="roma-negras-5a.jpg"></label></div>
                            <div><label for="talle-select-roma-negras-1"><img alt="Roma Negras Vista 4" data-lazy="roma-negras-2a.jpg"></label></div>
                            <div><label for="talle-select-roma-negras-1"><img alt="Roma Negras Vista 5" data-lazy="roma-negras-3a.jpg"></label></div>
                            <div><label for="talle-select-roma-negras-1"><img alt="Roma Negras Vista 6" data-lazy="roma-negras-4a.jpg"></label></div>
                            <div><label for="talle-select-roma-negras-1"><img alt="Roma Negras Vista 7" data-lazy="roma-negras-2.jpg"></label></div>
                        </div>
                        <div class="product-selection" id="talles-roma-negras">
                            <p class="product-info-details"><strong>Material:</strong> Cuero | <strong>Suela:</strong> Expanso | Un clásico versátil para tus looks.</p>
                             <div class="quantity-selector">
                                <span>Cantidad:</span>
                                <label>1 <input checked="checked" name="hwA-qty-roma-negras" type="radio" value="1" /></label>
                                <label>2 <input name="hwA-qty-roma-negras" type="radio" value="2" /></label>
                            </div>
                            <div class="size-selector">
                                <fieldset id="hwA-roma-negras-1">
                                    <div class="form-group">
                                        <label for="talle-select-roma-negras-1" class="sr-only">Talle Par 1</label>
                                        <select id="talle-select-roma-negras-1" class="form-control talle"><option value="">-- Talle Par 1 --</option><option value="35-roma-negras">35 (23 cm)</option><option value="36-roma-negras">36 (23,5 cm)</option><option value="37-roma-negras">37 (24 cm)</option><option value="38-roma-negras">38 (25 cm)</option><option value="39-roma-negras">39 (25,5 cm)</option><option value="40-roma-negras">40 (26 cm)</option></select>
                                     </div>
                                </fieldset>
                                <fieldset class="fieldsetstalles" id="hwA-roma-negras-2">
                                    <div class="form-group">
                                        <label for="talle-select-roma-negras-2" class="sr-only">Talle Par 2</label>
                                        <select id="talle-select-roma-negras-2" class="form-control talle"><option value="">-- Talle Par 2 --</option><option value="35-roma-negras">35 (23 cm)</option><option value="36-roma-negras">36 (23,5 cm)</option><option value="37-roma-negras">37 (24 cm)</option><option value="38-roma-negras">38 (25 cm)</option><option value="39-roma-negras">39 (25,5 cm)</option><option value="40-roma-negras">40 (26 cm)</option></select>
                                    </div>
                                </fieldset>
                            </div>
                        </div>
                    </div>

                    <!-- PRODUCTO 2: Roma Suela -->
                    <div class="product-item" id="modeload-roma-suela">
                        <h2>Mocasín Roma Suela</h2>
                        <div class="model-carousel">
                            <div><label for="talle-select-roma-suela-1"><img alt="Roma Suela Vista 1" src="roma-suela-1a.jpg"></label></div>
                            <div><label for="talle-select-roma-suela-1"><img alt="Roma Suela Vista 2" data-lazy="roma-suela-2a.jpg"></label></div>
                            <div><label for="talle-select-roma-suela-1"><img alt="Roma Suela Vista 3" data-lazy="roma-suela-1.jpg"></label></div>
                            <div><label for="talle-select-roma-suela-1"><img alt="Roma Suela Vista 4" data-lazy="roma-suela-2.jpg"></label></div>
                        </div>
                         <div class="product-selection" id="talles-roma-suela">
                             <p class="product-info-details"><strong>Material:</strong> Cuero | <strong>Suela:</strong> Expanso | El tono cálido perfecto para el otoño.</p>
                              <div class="quantity-selector">
                                 <span>Cantidad:</span>
                                 <label>1 <input checked="checked" name="hwA-qty-roma-suela" type="radio" value="1" /></label>
                                 <label>2 <input name="hwA-qty-roma-suela" type="radio" value="2" /></label>
                             </div>
                             <div class="size-selector">
                                 <fieldset id="hwA-roma-suela-1">
                                     <div class="form-group">
                                         <label for="talle-select-roma-suela-1" class="sr-only">Talle Par 1</label>
                                         <select id="talle-select-roma-suela-1" class="form-control talle"><option value="">-- Talle Par 1 --</option><option value="35-roma-suela">35 (23 cm)</option><option value="36-roma-suela">36 (23,5 cm)</option><option value="37-roma-suela">37 (24 cm)</option><option value="38-roma-suela">38 (25 cm)</option><option value="39-roma-suela">39 (25,5 cm)</option><option value="40-roma-suela">40 (26 cm)</option></select>
                                      </div>
                                 </fieldset>
                                 <fieldset class="fieldsetstalles" id="hwA-roma-suela-2">
                                     <div class="form-group">
                                         <label for="talle-select-roma-suela-2" class="sr-only">Talle Par 2</label>
                                         <select id="talle-select-roma-suela-2" class="form-control talle"><option value="">-- Talle Par 2 --</option><option value="35-roma-suela">35 (23 cm)</option><option value="36-roma-suela">36 (23,5 cm)</option><option value="37-roma-suela">37 (24 cm)</option><option value="38-roma-suela">38 (25 cm)</option><option value="39-roma-suela">39 (25,5 cm)</option><option value="40-roma-suela">40 (26 cm)</option></select>
                                     </div>
                                 </fieldset>
                             </div>
                         </div>
                    </div>

                    <!-- PRODUCTO 3: Siena 2025 -->
                    <div class="product-item" id="modeload-siena2025">
                        <h2>Borcego Siena 2025</h2>
                        <div class="model-carousel">
                            <div><label for="talle-select-siena2025-1"><img src="siena2025-1.webp" alt="Siena 2025 Vista 1"></label></div>
                            <div><label for="talle-select-siena2025-1"><img data-lazy="siena2025-2.webp" alt="Siena 2025 Vista 2"></label></div>
                        </div>
                         <div class="product-selection" id="talles-siena2025">
                             <p class="product-info-details"><strong>Material:</strong> Cuero | <strong>Suela:</strong> Expanso | Robusto y chic, listo para cualquier aventura.</p>
                              <div class="quantity-selector">
                                 <span>Cantidad:</span>
                                 <label>1 <input checked="checked" name="hwA-qty-siena2025" type="radio" value="1" /></label>
                                 <label>2 <input name="hwA-qty-siena2025" type="radio" value="2" /></label>
                             </div>
                              <div class="size-selector">
                                  <fieldset id="hwA-siena2025-1">
                                      <div class="form-group">
                                          <label for="talle-select-siena2025-1" class="sr-only">Talle Par 1</label>
                                          <select id="talle-select-siena2025-1" class="form-control talle">
                                              <option value="">-- Talle Par 1 --</option>
                                              <option value="35-siena2025">35 (23 cm)</option>
                                              <option value="36-siena2025">36 (23,5 cm)</option>
                                              <option value="37-siena2025">37 (24 cm)</option>
                                              <option value="38-siena2025">38 (25 cm)</option>
                                              <option value="39-siena2025">39 (25,5 cm)</option>
                                              <option value="40-siena2025">40 (26 cm)</option>
                                          </select>
                                      </div>
                                  </fieldset>
                                 <fieldset class="fieldsetstalles" id="hwA-siena2025-2">
                                      <div class="form-group">
                                          <label for="talle-select-siena2025-2" class="sr-only">Talle Par 2</label>
                                          <select id="talle-select-siena2025-2" class="form-control talle">
                                              <option value="">-- Talle Par 2 --</option>
                                              <option value="35-siena2025">35 (23 cm)</option>
                                              <option value="36-siena2025">36 (23,5 cm)</option>
                                              <option value="37-siena2025">37 (24 cm)</option>
                                              <option value="38-siena2025">38 (25 cm)</option>
                                              <option value="39-siena2025">39 (25,5 cm)</option>
                                              <option value="40-siena2025">40 (26 cm)</option>
                                          </select>
                                      </div>
                                  </fieldset>
                              </div>
                         </div>
                    </div>
                    <!-- ... Agregar más productos aquí siguiendo el mismo patrón ... -->
                </div>
            </fieldset>

            <!-- Testimonials Section -->
             <section class="testimonials-section" style="margin-bottom: 50px; margin-top: 30px;">
                <h2 class="text-center" style="font-weight: 400; color: #5d4037; font-size: 1.6em;">💖 Lo que dicen nuestras clientas 💖</h2>
                <div class="testimonials-carousel">
                    <div><img alt="Comentario Cliente 1" data-lazy="comentariorecibi1.webp" /></div>
                    <div><img alt="Comentario Cliente 2" data-lazy="comentariorecibi2.webp" /></div>
                    <div><img alt="Comentario Cliente 3" data-lazy="comentariorecibi4.webp" /></div>
                    <div><img alt="Comentario Cliente 4" data-lazy="comentariorecibi5.webp" /></div>
                    <div><img alt="Comentario Cliente 5" data-lazy="comentariorecibi6.webp" /></div>
                    <div><img alt="Comentario Cliente 6" data-lazy="comentariorecibi7.webp" /></div>
                    <div><img alt="Comentario Cliente 7" data-lazy="comentariorecibi8.webp" /></div>
                    <div><img src="comentariosig.webp" alt="Comentarios Instagram"></div>
                    <div><img alt="Referencia Cliente 1" data-lazy="comentario3-min.webp" /></div>
                    <div><img alt="Referencia Cliente 2" data-lazy="comentario4-min.webp" /></div>
                    <div><img alt="Referencia Cliente 3" data-lazy="comentario5-min.webp" /></div>
                </div>
            </section>

            <!-- Shipping and Payment Form Section -->
            <div id="restodelform" style="display:none;">
                 <h2 id="datos-envio">¡Casi listos! Completa tus datos</h2>

                <fieldset>
                    <legend>Resumen de tu Pedido</legend>
                    <div class="form-group">
                        <label for="1471599855">Modelos y Talles Seleccionados:</label>
                        <input class="form-control" id="1471599855" name="entry.1471599855" readonly="readonly" type="text" placeholder="Aquí verás tu selección..." />
                         <p class="help-block">Confirma que sean los correctos antes de seguir.</p>
                    </div>
                </fieldset>

                <fieldset>
                     <legend>Información de Contacto</legend>
                     <div class="form-group">
                        <label for="1465946249">Email <span style="color:red">*</span></label>
                        <input class="form-control" id="1465946249" name="entry.1465946249" placeholder="tuemail@ejemplo.com" required type="email" />
                        <p class="help-block">Para enviarte la confirmación y el seguimiento de tu pedido.</p>
                    </div>
                     <div class="form-group">
                        <label for="1460904554">Nombre y Apellido <span style="color:red">*</span></label>
                        <input class="form-control" id="1460904554" name="entry.1460904554" placeholder="Quien recibe el pedido" required type="text" />
                    </div>
                     <div class="form-group">
                        <label for="53830725">WhatsApp <span style="color:red">*</span></label>
                        <input class="form-control" id="53830725" name="entry.53830725" placeholder="Ej: 1156457057 (sin 0 ni 15)" required type="tel" />
                         <!-- Error message element -->
                        <div class="error-message" data-target="53830725"></div>
                        <p class="help-block">Fundamental para coordinar el envío si es necesario.</p>
                    </div>
                </fieldset>

                <fieldset>
                     <legend>Dirección de Envío <span style="color:red">*</span></legend>
                     <p class="help-block" style="margin-bottom: 20px;">¡Asegúrate que sea correcta para recibir tu paquete sin problemas!</p>
                     <div class="form-group">
                        <label for="951592426">Calle y Número (Piso/Dpto)</label>
                        <input class="form-control" id="951592426" name="entry.951592426" placeholder="Ej: Av. Siempreviva 742, 3B" required type="text"/>
                    </div>
                    <div class="form-group">
                        <label for="1005165410">Código Postal</label>
                        <input class="form-control" id="1005165410" name="entry.1005165410" placeholder="Ej: 1425" required type="text" />
                    </div>
                     <div class="form-group">
                        <label for="1743418466">Localidad</label>
                        <input class="form-control" id="1743418466" placeholder="Ej: Palermo" required type="text" />
                    </div>
                     <div class="form-group">
                         <label for="59648134">Provincia</label>
                         <select class="form-control" id="59648134" name="entry.59648134" required title="Provincia">
                            <option value="">-- Selecciona tu Provincia --</option>
                            <option value="Buenos Aires">Buenos Aires</option>
							<option value="Capital Federal">CABA</option>
                            {/* ... (resto de provincias) ... */}
							<option value="Tucumán">Tucumán</option>
                        </select>
                    </div>
                     <div class="form-group">
                        <label for="541001873">DNI</label>
                        <input class="form-control" id="541001873" name="entry.541001873" placeholder="Del titular de la tarjeta o quien recibe" required type="text" />
                        <p class="help-block">Necesario para el envío y/o verificación de pago.</p>
                    </div>
                    <!-- Hidden field for shipping method -->
                    <div class="form-group hidden">
                        <select class="form-control" id="2315500325" name="entry.17650825"><option selected value="A DOMICILIO">A DOMICILIO</option></select>
                    </div>
                 </fieldset>

                 <fieldset>
                    <legend>Forma de Pago</legend>
                    <div class="form-group">
                        <label for="comoabona">¿Cómo prefieres abonar? <span style="color:red">*</span></label>
                        <select class="form-control" id="comoabona" name="comoabona" required>
                            <option value="">-- Selecciona una opción --</option>
                            <option value="tarjeta">💳 Tarjeta de Crédito/Débito (¡3 Cuotas sin interés!)</option>
							<option value="mercadopago">💲 Saldo en cuenta MercadoPago</option>
							<option value="cbu">🏦 Transferencia Bancaria (¡Con 10% OFF adicional!)</option>
                        </select>
                        <p class="help-block">Te redirigiremos a la plataforma de pago segura.</p>
                    </div>
                 </fieldset>

                <div id="confirma-pedido">
                    <h3>Revisa tu Pedido y Datos</h3>
                    <p><strong>Selección:</strong> <span id="help-modelostallesseleccionados">-</span></p>
                    <p><strong>Nombre:</strong> <span id="help-nombre">-</span></p>
                    <p><strong>WhatsApp:</strong> <span id="help-wapp">-</span></p>
                    <p><strong>Email:</strong> <span id="help-email">-</span></p>
                    <p><strong>Dirección:</strong> <span id="help-calleyaltura">-</span>, <span id="help-localidad">-</span> (<span id="help-cp">-</span>), <span id="help-provincia">-</span></p>
                    <p><strong>DNI:</strong> <span id="help-dni">-</span></p>

                    <p id="preciototal">Elige modelos y talles para ver el total</p>

                    <p class="help-block" style="font-size: 0.9em; margin-top: 15px;">
                       <strong style="color:#c06a49; display:inline; min-width:auto;">¡Importante!</strong> Tu pedido es un compromiso de pago. Verifica que todo sea correcto.<br>
                       Recuerda que despachamos en aprox. 15 días (producimos a pedido) y te enviaremos el seguimiento por email.
                    </p>
                </div>

                <button class="btn btn-primary" id="botoncomprar" type="submit">Confirmar y Pagar 🛒</button>
            </div>
        </form>
        <!-- Form End -->

    </div> <!-- End Container -->

    <!-- Notification Area -->
    <div id="notification-container"></div>

    <!-- Loading Overlay -->
    <div class="loading-overlay">
        <div class="loading-spinner"></div>
        <p class="loading-message">Estamos preparando tu pago seguro...<br>Un momento por favor, no actualices la página.</p>
    </div>

    <script type="text/javascript" src="//cdn.jsdelivr.net/npm/slick-carousel@1.8.1/slick/slick.min.js"></script>
    <script>
    // --- Todo el JavaScript anterior (sin cambios en la lógica funcional) ---
    $(document).ready(function(){

      // --- Slick Carousel Initialization ---
      $('.model-carousel').slick({
        dots: true,
        infinite: true,
        speed: 400,
        fade: false,
        cssEase: 'ease-in-out',
        lazyLoad: 'ondemand',
        adaptiveHeight: true,
        slidesToShow: 1,
        slidesToScroll: 1,
        arrows: true,
        responsive: [
            {
              breakpoint: 768,
              settings: {
                dots: true,
                arrows: true
              }
            }
          ]
      });

      $('.testimonials-carousel').slick({
        dots: true,
        infinite: true,
        speed: 500,
        arrows: false,
        autoplay: true,
        autoplaySpeed: 4000,
        slidesToShow: 1,
        slidesToScroll: 1,
        adaptiveHeight: true
      });

      // --- Product Selection Logic ---
      var fieldsetsToShow = ['roma-negras', 'roma-suela', 'siena2025']; // Add all product IDs
      fieldsetsToShow.forEach(function(fieldset) {
        $('input[name="hwA-qty-' + fieldset + '"]').click(function() {
          var selectedQty = parseInt($(this).val());
          var $parentSelection = $(this).closest('.product-selection');
          if (selectedQty === 2) {
            $parentSelection.find('fieldset#hwA-' + fieldset + '-2').slideDown('fast');
          } else {
            $parentSelection.find('fieldset#hwA-' + fieldset + '-2').slideUp('fast');
            $parentSelection.find('fieldset#hwA-' + fieldset + '-2 select.talle').val('');
            $parentSelection.find('fieldset#hwA-' + fieldset + '-2 select.talle').trigger('change');
          }
        });
      });

      // --- Update Order Summary ---
      var summaryInput = $("#1471599855");
      var floatingSummary = $("#floating-cart-summary");
      var floatingSummaryText = $("#floating-cart-summary p b");
      var floatingPriceSummary = $("#floating-price-summary");
      var finalizeButton = $("#finalizarpedido");
      var restOfForm = $("#restodelform");

      $("#todoslosmodelos select.talle").change(function(){
        var $currentItem = $(this).closest('.product-item');
        var $select = $(this);
        var currentVal = $select.val();
        var prevVal = $select.data('pre') || "";

        $currentItem.find('.avisoagregado').remove();
        if (currentVal) {
          $select.closest('.form-group').prepend('<p class="avisoagregado">¡Agregado!</p>');
        }

        var summaryContent = summaryInput.val() || "";
        var summaryArray = summaryContent.split(', ').filter(Boolean);

        if (prevVal) {
          summaryArray = summaryArray.filter(item => item !== prevVal);
        }
        if (currentVal) {
          summaryArray.push(currentVal);
        }

        if (summaryArray.length > 2) {
          alert("Puedes seleccionar un máximo de 2 pares. Por favor, revisa tu selección.");
          $select.val(prevVal);
          summaryArray = summaryArray.filter(item => item !== currentVal);
          if (prevVal && !summaryArray.includes(prevVal)) {
             summaryArray.push(prevVal);
          }
          $currentItem.find('.avisoagregado').remove();
        } else {
            $select.data('pre', currentVal);
        }

        summaryInput.val(summaryArray.join(', '));
        var finalSummary = summaryInput.val();
        $("#help-modelostallesseleccionados").text(finalSummary || '-');
        floatingSummaryText.text(finalSummary || '...');

        var pairCount = summaryArray.length;
        var totalPriceText = "Elige tus modelos y talles para ver el total";
        var totalPrice = 0;

        if (pairCount === 1) {
          totalPrice = 70000;
          totalPriceText = 'TOTAL: <span class="price">🔥 $<span class="preciototalaobservar" data-original-price="70000">70.000</span> x 1 par</span> + <span class="shipping">ENVÍO GRATIS</span> <br><small>¡Añade otro par por solo $55.000!</small>';
          restOfForm.slideDown();
          floatingSummary.fadeIn();
          finalizeButton.removeClass('hidden');
        } else if (pairCount === 2) {
          totalPrice = 110000;
          totalPriceText = 'TOTAL: <span class="price">🔥 $<span class="preciototalaobservar" data-original-price="110000">110.000</span> x 2 pares</span> + <span class="shipping">ENVÍO GRATIS</span> <br><small>¡Excelente precio ($55.000 c/u)!</small>';
          restOfForm.slideDown();
          floatingSummary.fadeIn();
          finalizeButton.removeClass('hidden');
        } else if (pairCount === 0) {
           restOfForm.slideUp();
           floatingSummary.fadeOut();
           finalizeButton.addClass('hidden');
        } else {
            totalPriceText = "Has seleccionado más de 2 pares. Revisa tu selección.";
            restOfForm.slideUp();
            floatingSummary.fadeIn();
             finalizeButton.addClass('hidden');
        }

        $("#preciototal").html(totalPriceText);
        floatingPriceSummary.html(totalPriceText.replace(/<br.*?>/g, ' ').replace(/<small.*?>.*?<\/small>/g, '')); // Clean floating summary

        $("#comoabona").trigger('change');
      });

      $("#todoslosmodelos select.talle").data('pre', '');

       finalizeButton.on('click', function(e) {
            e.preventDefault();
            $('html, body').animate({ scrollTop: $("#datos-envio").offset().top - 20 }, 500);
       });

      // --- Form Input Formatting & Live Update ---
       $('#1465946249').on('input blur', function() { $(this).val($(this).val().trim().toLowerCase()); });
       $('#541001873').on('input', function() { $(this).val($(this).val().replace(/[\s.]/g, '')); });
       $('#53830725').on('input', function() {
            let value = $(this).val().replace(/[\s-+\.]/g, '');
            if (value.startsWith('549')) value = value.substring(3);
            else if (value.startsWith('54')) value = value.substring(2);
            while (value.startsWith('0') && value.length > 1) value = value.substring(1);
            $(this).val(value.replace(/\D/g, ''));
       });

        $("#1460904554, #1465946249, #53830725, #951592426, #1743418466, #59648134, #1005165410, #541001873").on('keyup change input', function() {
             $("#help-nombre").text($("#1460904554").val() || '-');
             $("#help-wapp").text($("#53830725").val() || '-');
             $("#help-email").text($("#1465946249").val() || '-');
             $("#help-calleyaltura").text($("#951592426").val() || '-');
             $("#help-localidad").text($("#1743418466").val() || '-');
             $("#help-provincia").text($("#59648134 option:selected").text().replace('-- Selecciona tu Provincia --','') || '-');
             $("#help-cp").text($("#1005165410").val() || '-');
             $("#help-dni").text($("#541001873").val() || '-');
              // Combine address fields for display
             let fullAddress = [$("#help-calleyaltura").text(), $("#help-localidad").text(), $("#help-cp").text(), $("#help-provincia").text()].filter(Boolean).join(', ').replace(/ ,/g, ',');
             $("#help-address-combined").text(fullAddress || '-'); // Assuming you add a span with this ID in the summary
        });
        $("#59648134").trigger('change'); // Initial trigger for province


      // --- Discount Logic ---
      $("#comoabona").change(function() {
        var selectedPayment = $(this).val();
        var isCBU = (selectedPayment === "cbu");

        $(".preciototalaobservar").each(function() {
            var $priceSpan = $(this);
            var originalPrice = $priceSpan.data('original-price');
            if (typeof originalPrice === 'undefined') { // Fallback if data attribute wasn't set initially
                 originalPrice = parseFloat($priceSpan.text().replace(/\./g, '').replace(',', '.'));
                 $priceSpan.data('original-price', originalPrice);
             }

            var priceToShow = isCBU ? Math.round(originalPrice * 0.90) : originalPrice;
            $priceSpan.text(priceToShow.toLocaleString('es-AR', { minimumFractionDigits: 0, maximumFractionDigits: 0 }).replace(/,/g, '.'));
        });
      });

       $("#whatsapp").delay(5000).fadeIn(400);
       $("#1209868979").val(window.location.href);


      // --- Form Submission (logic remains the same) ---
      $('#bootstrapForm').submit(async function (event) {
          event.preventDefault();
          var $form = $(this);
          var $submitButton = $('#botoncomprar');

          if ($('#website').val() !== '') { console.log('Bot detected.'); return false; }

          if (!this.checkValidity()) {
              alert('Por favor, completa todos los campos obligatorios (*) correctamente.');
              $submitButton.val('Confirmar y Pagar 🛒').prop('disabled', false);
              $form.find(':invalid').first().focus();
              return;
          }

          const talleselegidos = $('#1471599855').val();
          if (!talleselegidos || talleselegidos.split(',').filter(Boolean).length === 0) {
              alert('¡No has seleccionado ningún par! Elige tus modelos y talles.');
              $submitButton.val('Confirmar y Pagar 🛒').prop('disabled', false);
              $('html, body').animate({ scrollTop: $("#todoslosmodelos").offset().top - 20 }, 500);
              return;
          }

          $submitButton.val('Procesando...').prop('disabled', true);
          $('.loading-overlay').addClass('visible');

          const formaPago = $('#comoabona').val();
          const nombreComprador = $('#1460904554').val();
          // Ensure we get the potentially discounted price if CBU is selected
          const montoTexto = $(".preciototalaobservar").first().text();
          const monto = parseFloat(montoTexto.replace(/\./g, ''));

          try {
              const formAction = $form.attr('action');
              const formData = new URLSearchParams($form.serialize());

              if (formaPago === "cbu") {
                  // ... (CBU logic - no changes needed) ...
                   console.log('Processing CBU payment...');
                   fbq('track', 'InitiateCheckout');
                   fetch(formAction, { method: 'POST', mode: 'no-cors', body: formData });
                   const pairCount = talleselegidos.split(',').filter(Boolean).length;
                   const redirectUrl = pairCount === 2 ? 'https://rositarococo.com/transferenciacbu-2pares.html' : 'https://rositarococo.com/transferenciacbu-1par.html';
                   setTimeout(() => { window.location.href = redirectUrl; }, 500);
                   return;

              } else if (formaPago === "tarjeta" || formaPago === "mercadopago") {
                   // ... (MercadoPago logic - no changes needed) ...
                    console.log('Processing MercadoPago/Card payment...');
                    fbq('track', 'InitiateCheckout');
                    try {
                        const response = await fetch("https://sswebhookss.odontolab.co/webhook/addaa0c8-96b1-4d63-b2c0-991d6be3de30", {
                            method: 'POST', headers: { 'Content-Type': 'application/json' },
                            body: JSON.stringify({ comprador: nombreComprador, monto: monto })
                        });
                        if (!response.ok) throw new Error(`Webhook status ${response.status}`);
                        const responseText = await response.text();
                        const jsonData = JSON.parse(responseText);
                        const mercadoPagoUrl = jsonData.linkpersonalizadomp;
                        if (!mercadoPagoUrl) throw new Error('MP link not found.');
                        $('#link-mercadopago').val(mercadoPagoUrl);
                        const finalFormData = new URLSearchParams($form.serialize());
                        fetch(formAction, { method: 'POST', mode: 'no-cors', body: finalFormData });
                        setTimeout(() => { window.location.href = mercadoPagoUrl; }, 1500);
                    } catch (webhookError) {
                         console.error("MP link fetch error:", webhookError);
                         alert('Hubo un problema al generar el link de pago. Intenta nuevamente.');
                         $('.loading-overlay').removeClass('visible');
                         $submitButton.val('Confirmar y Pagar 🛒').prop('disabled', false);
                    }
                    return;
              }
              throw new Error("Forma de pago no válida.");
          } catch (error) {
              console.error("Submission error:", error);
              alert('Ocurrió un error inesperado. Por favor, inténtalo de nuevo.');
              $('.loading-overlay').removeClass('visible');
              $submitButton.val('Confirmar y Pagar 🛒').prop('disabled', false);
          }
      });


      // --- Sales Notification Popups (logic remains same) ---
      const salesData = [ /* ... sales data ... */ ];
      let currentNotificationIndex = 0;
      function showNotification() { /* ... show notification logic ... */ }
      // setTimeout(() => { showNotification(); setInterval(showNotification, 12000); }, 8000);
      // Optional: Adjust timing or content if desired


      // --- WhatsApp Number Validation (logic remains the same) ---
      (function() {
           // ... WhatsApp validation function ...
           const whatsappInputId = "53830725";
            const dependentElementIds = ["59648134", "1743418466", "1005165410", "951592426", "541001873", "comoabona", "botoncomprar"];
            const errorClass = "error-message";
            const apiUrl = "https://sswebhookss.odontolab.co/webhook/02eb0643-1b9d-4866-87a7-f892d6a945ea";

            let validationTimeout;
            let isChecking = false;
            let lastCheckedValue = null;

            function getInputElement(id) { return document.getElementById(id); }
            function getErrorElement() { /* ... Get/create error element ... */
                let errorElement = document.querySelector(`.${errorClass}[data-target="${whatsappInputId}"]`);
                if (!errorElement) {
                    const inputElement = getInputElement(whatsappInputId);
                    if (inputElement && inputElement.parentNode) { // Check parent node exists
                        errorElement = document.createElement("div");
                        errorElement.className = errorClass;
                        errorElement.setAttribute('data-target', whatsappInputId);
                        // Insert after input, handling potential next siblings
                        inputElement.parentNode.insertBefore(errorElement, inputElement.nextSibling);
                    }
                }
                return errorElement;
            }
            function hideError() { /* ... Hide error ... */
                 const errorElement = getErrorElement();
                 if (errorElement) { errorElement.style.display = "none"; errorElement.className = errorClass; }
            }
            function showError(message, status = "invalid") { /* ... Show error with status class ... */
                 const errorElement = getErrorElement();
                 if (errorElement) {
                     errorElement.textContent = message;
                     errorElement.className = `${errorClass} ${status}`;
                     errorElement.style.display = "block";
                 }
            }
            function formatNumberForValidation(number) { /* ... Format number ... */
                 let rawNumber = number.replace(/\D/g, "");
                 if (rawNumber.length >= 10 && rawNumber.length <= 12) {
                      if (rawNumber.length === 11 && rawNumber.startsWith('9')) rawNumber = '54' + rawNumber;
                      else if (rawNumber.length === 10) rawNumber = '549' + rawNumber;
                  } else if (rawNumber.length > 0) return null;
                 return rawNumber.startsWith('549') ? rawNumber : null;
            }
            function setDependentElementsDisabled(disabled) { /* ... Disable/enable fields ... */
                 dependentElementIds.forEach(id => {
                     const element = getInputElement(id);
                     if (element) { element.disabled = disabled; }
                 });
            }
            function validateWhatsApp() { /* ... Validation logic using fetch ... */
                 if (isChecking) return;
                 const inputElement = getInputElement(whatsappInputId);
                 if (!inputElement) return;
                 const currentValue = inputElement.value.trim();
                 if (currentValue === lastCheckedValue || currentValue === "") { if (currentValue === "") hideError(); return; }
                 const formattedNumber = formatNumberForValidation(currentValue);

                 if (!formattedNumber) {
                      if (currentValue !== "") showError("Formato de WhatsApp inválido.", "invalid"); else hideError();
                      setDependentElementsDisabled(true);
                      lastCheckedValue = currentValue; return;
                 }

                 isChecking = true; lastCheckedValue = currentValue;
                 showError("Verificando WhatsApp...", "verifying"); setDependentElementsDisabled(true);

                 fetch(apiUrl, { method: "POST", headers: { "Content-Type": "application/json" }, body: JSON.stringify({ whatsapp_check: formattedNumber }) })
                 .then(response => { if (!response.ok) throw new Error(`API Error: ${response.status}`); return response.json(); })
                 .then(data => { const isValid = data.exists === true; showError(isValid ? "WhatsApp válido." : "WhatsApp no encontrado.", isValid ? "valid" : "invalid"); setDependentElementsDisabled(!isValid); })
                 .catch(error => { console.error("WhatsApp validation error:", error); showError("Error al verificar.", "error-connection"); setDependentElementsDisabled(true); })
                 .finally(() => { isChecking = false; });
            }
            function handleInput() { /* ... Handle input with debounce ... */
                 clearTimeout(validationTimeout); hideError(); setDependentElementsDisabled(true);
                 validationTimeout = setTimeout(validateWhatsApp, 800);
             }
            const whatsappInput = getInputElement(whatsappInputId);
            if (whatsappInput) { whatsappInput.addEventListener("input", handleInput); whatsappInput.addEventListener("blur", validateWhatsApp); setDependentElementsDisabled(true); }
            else { console.error("WhatsApp input field not found."); }
      })();


    }); // End document ready
    </script>

</body>
</html>